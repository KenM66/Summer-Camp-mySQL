CREATE DATABASE Summer_Camp;
USE Summer_Camp;

CREATE TABLE address(
        ID INT NOT NULL AUTO_INCREMENT,
		address1 varchar(255),
		address2 varchar(255),
		address3 varchar(255), 
		city varchar(255),
		state varchar(2), 
		zipcode varchar(10),
		PRIMARY KEY (ID)
);

CREATE TABLE organization(
		 ID INT NOT NULL AUTO_INCREMENT,
		 organizationName varchar(255), 
		 organizationAddress int,
		 organizationPhone varchar(12), 
		 e-mail varchar(255), 
		 FOREIGN KEY organizationAddress REFERENCES address(ID),
		 PRIMARY KEY (ID)
		 
);

ALTER TABLE organization AUTO_INCREMENT= 1000;

CREATE TABLE camp(
         ID INT NOT NULL AUTO_INCREMENT,
		 CampName varchar(255),
		 CampSlogan varchar(255),
		 organizationID INT,
		 campAddress INT,
		 e-mail varchar(255),
		 CampPinCode MEDIUMINT(4) UNSIGNED ZEROFILL NOT NULL,
		 FOREIGN KEY organizationID REFERENCES organization(ID),
		 FOREIGN KEY campAddress REFERENCES address(ID), 
		 PRIMARY KEY (ID)
);



CREATE TABLE session(
        ID INT NOT NULL AUTO_INCREMENT, 
		campID INT NOT NULL,
		startDate DATE NOT NULL,
		PRIMARY KEY (ID),
		FOREIGN KEY (campID) REFERENCES camp(ID)

);

CREATE TABLE cabin(
       ID INT NOT NULL AUTO_INCREMENT,
	   CabinName varchar(255), 
	   campSessionID INT NOT NULL,
	   cabinAgeMin INT(2),
	   cabinAgeMax INT(2),
	   cabinGender varchar(1),
	   cabinCamperCapacity INT(2),
	   cabinNumOfCounselors INT(2),
	   PRIMARY KEY(ID),
	   FOREIGN KEY(campSessionID) REFERENCES session(ID)

);

CREATE TABLE camper(
       ID INT NOT NULL AUTO_INCREMENT,
	   firstName varchar(255) NOT NULL,
	   lastName varchar(255) NOT NULL,
	   middleInitial varchar(1),
	   gender varchar(1),
	   dateOfBirth DATE,
	   last4SS INT(4),
	   disordersOther varchar(255),
	   medications varchar(255),
	   specialNeeds varchar(255),
	   dietaryPreferencesOther varchar(255),
	   specialRequests varchar(255),
	   allergiesOther varchar(255),
	   notes varchar(255),
	   PRIMARY KEY (ID)
	   
	   
);

ALTER TABLE camper AUTO_INCREMENT= 100;

CREATE TABLE staffType(
	  ID INT NOT NULL, 
	  type varchar(255),
	  PRIMARY KEY (ID)
);

INSERT INTO staffType VALUES
		(1, campDirector), 
		(2, campAssistantDirector), 
		(3, nurse), 
		(4, registrar), 
		(5, clinicStaffMember), 
		(6, staffSupervisor), 
		(7, maintenance), 
		(8, leadershipStaff), 
		(9, administrator), 
		(10, foodServicesWorker), 
		(11, cabinCounselor), 
		(12, programLeader),
		(13, humanResourcesManager),
		(14, humanResourcesRepresentative),
		(15, president),
		(16, Other);
		

CREATE TABLE staff(
	   ID INT NOT NULL AUTO_INCREMENT,
	   firstName varchar(255) NOT NULL,
	   lastName varchar(255) NOT NULL,
	   dateOfBirth DATE,
	   socialSecurityNumber INT(9),
	   address INT,
	   e-mail varchar(255),
	   phone INT (12),
	   FOREIGN KEY (address) REFERENCES address(ID),
	   PRIMARY KEY(ID)
	   
	   
);


ALTER TABLE  staff AUTO_INCREMENT= 900;

CREATE TABLE staffTypeOrganizationLink(
	   staffID INT, 
	   organizationID INT, 
	   staffTypeID INT, 
	   FOREIGN KEY staffID REFERENCES staff(ID),
	   FOREIGN KEY organizationID REFERENCES organization(ID), 
	   FOREIGN KEY staffTypeID REFERENCES staffType(ID),
	   PRIMARY KEY (staffID, organizationID, staffTypeID)

);

CREATE TABLE reference(
       ID INT NOT NULL AUTO_INCREMENT,
	   firstName varchar(255) NOT NULL,
	   lastName varchar(255) NOT NULL,
	   middleInitial varchar(1),
	   phone INT (12),
	   e-mail varchar(255), 
	   relationship varchar(255),
	   PRIMARY KEY (ID)
	   

);

CREATE TABLE staffReferenceLink(
       staffID INT, 
	   referenceID INT,
	   FOREIGN KEY (staffID) REFERENCES staff(ID),
	   FOREIGN KEY (referenceID) REFERENCES reference(ID),
	   PRIMARY KEY (staffID, referenceID)

);



CREATE TABLE camperSessionLink(
	  camperID INT,
	  sessionID INT,
	  FOREIGN KEY (camperID) REFERENCES camper(ID),
	  FOREIGN KEY (sessionID) REFERENCES session(ID),
	  PRIMARY KEY (camperID, sessionID)
);



CREATE TABLE camperCabin(
		camperID INT,
		cabinID INT,
	    FOREIGN KEY (camperID) REFERENCES camper(ID),
		FOREIGN KEY (cabinID) REFERENCES cabin(ID),
	    PRIMARY KEY (camperID, cabinID)
);

CREATE TABLE staffSessionLink(
		staffID INT, 
		sessionID INT, 
		FOREIGN KEY (staffID) REFERENCES staff(ID),
		FOREIGN KEY (sessionID) REFERENCES session(ID),
		PRIMARY KEY (staffID, sessionID)
);

CREATE TABLE staffCabinLink(
		staffID INT, 
		cabinID INT, 
		FOREIGN KEY (staffID) REFERENCES counselor(ID), 
		FOREIGN KEY (cabinID) REFERENCES cabin(ID),
		PRIMARY KEY (staffID, cabinID)
);

CREATE TABLE parent(
         ID INT NOT NULL AUTO_INCREMENT,
		 firstName varchar(255) NOT NULL,
		 lastName varchar(255) NOT NULL,
		 addressID INT,
		 phone varchar(12) NOT NULL,
		 e-mail varchar(255),
		 relationship varchar(255),
		 PRIMARY KEY (ID)
);




CREATE TABLE parentCamperLink(
	   parentID INT,
	   camperID INT, 
	   FOREIGN KEY (parentID) REFERENCES parent(ID), 
	   FOREIGN KEY (camperID) REFERENCES camper(ID),
	   PRIMARY KEY (parentID, camperID)
);

CREATE TABLE disorders(
       ID INT NOT NULL AUTO_INCREMENT,
	   name varchar(255) NOT NULL,
	   PRIMARY KEY (ID)
);

INSERT INTO disorders VALUES
    (1, autism),
	(2, adhd), 
	(3, anxiety), 
	(4, bedwetting), 
	(5, asthma), 
	(6, depression);

CREATE TABLE camperDisorderLink(
        camperID INT,
		disorderID INT,
		FOREIGN KEY (camperID) REFERENCES camper(ID),
	    FOREIGN KEY (disorderID) REFERENCES disorders(ID),
		PRIMARY KEY (camperID, disorderID)
);



CREATE TABLE incidentType(
        ID INT NOT NULL AUTO_INCREMENT,
		name varchar(10),
		PRIMARY KEY(ID)
);
INSERT INTO incidentType VALUES
      (1, medical),
      (2, behavioral), 
      (3, injury),
	  (4, staffConduct),
	  (5, other);
	  
CREATE TABLE actionTaken(
	   ID INT NOT NULL AUTO_INCREMENT,
	   type varchar(30),
	   PRIMARY KEY(ID)
	   
);

INSERT INTO actionTaken VALUES
     (1, warning),
	 (2, lossOfActivity),
	 (3, parentNotification), 
	 (4, finalWarning),
	 (5, dismissalfromCamp), 
	 (6, medecine), 
	 (7, ice), 
	 (8, bandaged), 
	 (9, 911),
	 (10, rest), 
	 (11, termination),
	 (12, other);
	 
	  

CREATE TABLE incident(
        ID INT NOT NULL AUTO_INCREMENT,
		campID INT,
		organizationID INT,
		type INT,
		actionTakenID INT,
		notes varchar(500),
		FOREIGN KEY(campID) REFERENCES camp(ID),
		FOREIGN KEY(type) REFERENCES incidentType(ID),
		FOREIGN KEY (actionTakenID) REFERENCES actionTaken(ID),
		FOREIGN KEY (organizationID) REFERENCES organization(ID),
		PRIMARY KEY (ID)
		
);



CREATE TABLE camperIncidentLink(
        camperID INT,
		incidentID INT,
		FOREIGN KEY (camperID) REFERENCES camp(ID),
		FOREIGN KEY (incidentID) REFERENCES incident(ID),
		PRIMARY KEY (camperID, incidentID)
		
);

CREATE TABLE staffIncidentLink(
		staffID INT, 
		incidentID INT, 
		FOREIGN KEY (staffID) REFERENCES staff(ID),
		FOREIGN KEY (incidentID) REFERENCES incident(ID),
		PRIMARY KEY (staffID, incidentID)

);

CREATE TABLE incidentActions(
	    incidentID INT, 
		actionTakenID INT,
		FOREIGN KEY (incidentID) REFERENCES incident(ID), 
		FOREIGN KEY (actionTakenID) REFERENCES actionTaken(ID), 
		PRIMARY KEY (incidentID, actionTakenID);
);

CREATE TABLE emergencyContact(
		ID INT NOT NULL AUTO_INCREMENT,
		name varchar(255) NOT NULL,
		phone INT(12), 
		relationship varchar(25),
		PRIMARY KEY (ID)
);

CREATE TABLE emergencyContactCamperLink(
	    emergencyContactID INT,
		camperID INT,
		FOREIGN KEY (emergencyContactID) REFERENCES emergencyContact(ID),
		FOREIGN KEY (camperID) REFERENCES camper(ID),
		PRIMARY KEY (emergencyContactID, camperID)

);

CREATE TABLE emergencyContactStaffLink(
		emergencyContactID INT,
		staffID INT, 
		FOREIGN KEY (emergencyContactID) REFERENCES emergencyContact(ID),
		FOREIGN KEY (staffID) REFERENCES staff(ID),
		PRIMARY KEY( emergencyContactID, staffID)

);

CREATE TABLE activity(
		ID INT NOT NULL AUTO_INCREMENT,
		name varchar(255), 
		description varchar(255),
		varchar(255),
		PRIMARY KEY (ID)
);

CREATE TABLE activitySession(
		ID INT NOT NULL AUTO_INCREMENT, 
		name varchar(255), 
		PRIMARY KEY(ID)
		
);

CREATE TABLE activitySessionDateLink(
		activitySessionID INT, 
		dt TIMESTAMP, 
		FOREIGN KEY(activitySessionID) REFERENCES activitySession(ID),
		PRIMARY KEY(activitySessionID, dt)
		
);

CREATE TABLE activitySessionLink(
		activityID INT,
		activitySessionID INT,
		FOREIGN KEY activityID REFERENCES activity(ID), 
		FOREIGN KEY activitySessionID REFERENCES activitySession(ID),
		PRIMARY KEY (activityID, activitySessionID)
);

CREATE TABLE camperActivityAssignments(
		activityID INT, 
		activitySessionID INT, 
		camperID INT, 
		FOREIGN KEY activityID REFERENCES activity(ID),
		FOREIGN KEY activitySessionID REFERENCES activitySession(ID),
		FOREIGN KEY camperID REFERENCES camper(ID),
		PRIMARY KEY (activityID, activitySessionID, camperID)
);

CREATE TABLE staffActivityAssignments(
	   activityID INT, 
	   activitySessionID INT, 
	   staffID INT, 
	   FOREIGN KEY activityID REFERENCES activity(ID),
	   FOREIGN KEY activitySessionID REFERENCES activitySession(ID),
	   FOREIGN KEY staffID REFERENCES staff(ID),
	   PRIMARY KEY (activityID, activitySessionID, staffID)
);

CREATE TABLE camperImageLink(
		camperID INT, 
		imagePath varchar(1024), 
		FOREIGN KEY camperID REFERENCES camper(ID), 
		PRIMARY KEY (camperID, imagePath)

);

CREATE TABLE staffImageLink(
		staffID INT, 
		imagePath varchar(1024), 
		FOREIGN KEY staffID REFERENCES staff(ID), 
		PRIMARY KEY (staffID, imagePath)
);

CREATE TABLE status(
	    ID INT NOT NULL, 
		status varchar(20),
		PRIMARY KEY (ID)
);

INSERT INTO status VALUES 
         (1, notArrived), 
         (2, arrived), 
         (3, departed),
         (4, offSite);

CREATE TABLE camperStatusLink(
	     camperID INT, 
		 statusID INT, 
		 FOREIGN KEY camperID REFERENCES camper(ID), 
		 FOREIGN KEY statusID REFERENCES status(ID), 
		 PRIMARY KEY (camperID, statusID)
);

CREATE TABLE staffStatusLink(
         staffID INT, 
		 statusID INT, 
		 FOREIGN KEY staffID REFERENCES staff(ID), 
		 FOREIGN KEY statusID REFERENCES status(ID), 
		 PRIMARY KEY (staffID, statusID)
);
